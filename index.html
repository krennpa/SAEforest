<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Mixed Effects Random Forests (MERFs) are a data-driven,
    nonparametric alternative to current methods of Small Area Estimation
    (SAE). SAEforest provides functions for the estimation of regionally
    disaggregated linear and nonlinear indicators using survey sample
    data. Included procedures facilitate the estimation of domain-level
    economic and inequality metrics and assess associated uncertainty.
    Emphasis lies on straightforward interpretation and visualization of results.">
<title>Mixed Effect Random Forests for Small Area Estimation â€¢ SAEforest</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Mixed Effect Random Forests for Small Area Estimation">
<meta property="og:description" content="Mixed Effects Random Forests (MERFs) are a data-driven,
    nonparametric alternative to current methods of Small Area Estimation
    (SAE). SAEforest provides functions for the estimation of regionally
    disaggregated linear and nonlinear indicators using survey sample
    data. Included procedures facilitate the estimation of domain-level
    economic and inequality metrics and assess associated uncertainty.
    Emphasis lies on straightforward interpretation and visualization of results.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">SAEforest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/krennpa/SAEforest/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="saeforest">SAEforest<a class="anchor" aria-label="anchor" href="#saeforest"></a>
</h1></div>
<!-- badges: start --><!-- badges: end --><p>The package promotes the use of Mixed Effects Random Forests (MERFs) for applications of Small Area Estimation (SAE). The package effectively combines functions for the estimation of regionally disaggregated linear and nonlinear economic and inequality indicators using survey sample data. Estimated models increase the precision of direct estimates from survey data, combining unit-level and aggregated population level covariate information from census or register data. Apart from point estimates, MSE estimates for requested indicators can be easily obtained. The package provides procedures to facilitate the analysis of model performance of MERFs and visualizes predictive relations from covariates and variable importance. Additionally, users can summarize and map indicators and corresponding measures of uncertainty.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of SAEforest from <a href="https://github.com/krennpa" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"krennpa/SAEforest"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is a basic example which demonstrates the functionality of this package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/krennpa/SAEforest" class="external-link">SAEforest</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"eusilcA_pop"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"eusilcA_smp"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">income</span> <span class="op">&lt;-</span> <span class="va">eusilcA_smp</span><span class="op">$</span><span class="va">eqIncome</span></span>
<span><span class="va">X_covar</span> <span class="op">&lt;-</span> <span class="va">eusilcA_smp</span><span class="op">[</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">16</span>,<span class="fl">17</span>,<span class="fl">18</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co">#Example 1:</span></span>
<span><span class="co">#Calculating point estimates and discussing basic generic functions</span></span>
<span></span>
<span><span class="va">model1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/SAEforest_model.html">SAEforest_model</a></span><span class="op">(</span>Y <span class="op">=</span> <span class="va">income</span>, X <span class="op">=</span> <span class="va">X_covar</span>, dName <span class="op">=</span> <span class="st">"district"</span>,</span>
<span>                         smp_data <span class="op">=</span> <span class="va">eusilcA_smp</span>, pop_data <span class="op">=</span> <span class="va">eusilcA_pop</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#SAEforest generics:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">model1</span><span class="op">)</span></span>
<span><span class="co">#&gt; ________________________________________________________________</span></span>
<span><span class="co">#&gt; Mixed Effects Random Forest for Small Area Estimation</span></span>
<span><span class="co">#&gt; ________________________________________________________________</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; SAEforest_model(Y = income, X = X_covar, dName = "district", </span></span>
<span><span class="co">#&gt;     smp_data = eusilcA_smp, pop_data = eusilcA_pop)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Domains</span></span>
<span><span class="co">#&gt; ________________________________________________________________</span></span>
<span><span class="co">#&gt;  In-sample Out-of-sample Total</span></span>
<span><span class="co">#&gt;         70            24    94</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Totals:</span></span>
<span><span class="co">#&gt; Units in sample: 1945 </span></span>
<span><span class="co">#&gt; Units in population: 25000 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                    Min. 1st Qu. Median      Mean 3rd Qu. Max.</span></span>
<span><span class="co">#&gt; Sample_domains       14    17.0   22.5  27.78571   29.00  200</span></span>
<span><span class="co">#&gt; Population_domains    5   126.5  181.5 265.95745  265.75 5857</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Random forest component: </span></span>
<span><span class="co">#&gt; ________________________________________________________________</span></span>
<span><span class="co">#&gt;                                            </span></span>
<span><span class="co">#&gt; Type:                            Regression</span></span>
<span><span class="co">#&gt; Number of trees:                        500</span></span>
<span><span class="co">#&gt; Number of independent variables:         14</span></span>
<span><span class="co">#&gt; Mtry:                                     3</span></span>
<span><span class="co">#&gt; Minimal node size:                        5</span></span>
<span><span class="co">#&gt; Variable importance mode:          impurity</span></span>
<span><span class="co">#&gt; Splitrule:                         variance</span></span>
<span><span class="co">#&gt; Rsquared (OOB):                     0.62976</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Structural component of random effects:</span></span>
<span><span class="co">#&gt; ________________________________________________________________</span></span>
<span><span class="co">#&gt; Linear mixed model fit by maximum likelihood  ['lmerMod']</span></span>
<span><span class="co">#&gt; Formula: Target ~ -1 + (1 | district)</span></span>
<span><span class="co">#&gt;    Data: data</span></span>
<span><span class="co">#&gt;  Offset: forest_preds</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;      AIC      BIC   logLik deviance df.resid </span></span>
<span><span class="co">#&gt;  39193.1  39204.2 -19594.5  39189.1     1943 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Scaled residuals: </span></span>
<span><span class="co">#&gt;     Min      1Q  Median      3Q     Max </span></span>
<span><span class="co">#&gt; -2.9730 -0.5194 -0.0759  0.4448 11.8159 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Random effects:</span></span>
<span><span class="co">#&gt;  Groups   Name        Variance Std.Dev.</span></span>
<span><span class="co">#&gt;  district (Intercept) 11157235 3340    </span></span>
<span><span class="co">#&gt;  Residual             30335770 5508    </span></span>
<span><span class="co">#&gt; Number of obs: 1945, groups:  district, 70</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ICC:  0.2688944 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Convergence of MERF algorithm: </span></span>
<span><span class="co">#&gt; ________________________________________________________________</span></span>
<span><span class="co">#&gt; Convergence achieved after 4 iterations.</span></span>
<span><span class="co">#&gt; A maximum of 25 iterations used and tolerance set to: 1e-04 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Monitored Log-Likelihood:                                          </span></span>
<span><span class="co">#&gt;  0 -19545.67 -19573.45 -19593.59 -19594.53</span></span></code></pre></div>
<p>I included some further features to inspect the model graphically. For instance look at the following output from the generic function <code>plot</code>, which shows a so-called variable importance plot: <img src="reference/figures/README-model1-1.png" width="75%"></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Press [enter] to continue</span></span></code></pre></div>
<p>We cannot only inspect the model graphically, but also map our indicators. Take a look at this example on Austrian pseudo-data for district-level mean income produced by the function <code>map_indicators</code>: <img src="reference/figures/README-unnamed-chunk-2-1.png" width="75%"></p>
<p>I hope you like this presentation and the package. If you are interested in model-based SAE you should definitely also check out package <code>emdi</code> <a href="https://cran.r-project.org/web/packages/emdi/" class="external-link uri">https://cran.r-project.org/web/packages/emdi/</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/krennpa/SAEforest/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing SAEforest</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Patrick Krennmair <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Patrick Krennmair.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
